<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 600 500">
  <style>
    /* Compass rotation */
    @keyframes compass-spin {
      0% { transform: rotate(0deg); }
      15% { transform: rotate(720deg); }
      25% { transform: rotate(675deg); }
      100% { transform: rotate(675deg); }
    }
    /* Compass fade out */
    @keyframes compass-fade {
      0%,20% { opacity: 1; }
      35% { opacity: 0.15; }
      85% { opacity: 0.15; }
      100% { opacity: 1; }
    }
    /* Floorplan reveal */
    @keyframes floor-reveal {
      0%,25% { opacity: 0; transform: scale(0.5); }
      40% { opacity: 1; transform: scale(1); }
      85% { opacity: 1; transform: scale(1); }
      100% { opacity: 0; transform: scale(0.5); }
    }
    /* Wind ribbon */
    @keyframes wind-ribbon {
      0%,35% { stroke-dashoffset: 500; opacity: 0; }
      40% { opacity: 0.4; }
      65% { stroke-dashoffset: 0; opacity: 0.4; }
      70% { opacity: 0; }
      100% { opacity: 0; stroke-dashoffset: -500; }
    }
    /* Sun rays */
    @keyframes sun-rays {
      0%,65% { opacity: 0; transform: rotate(-15deg); }
      75% { opacity: 0.5; }
      90% { opacity: 0.3; transform: rotate(10deg); }
      100% { opacity: 0; transform: rotate(15deg); }
    }
    /* Warm glow */
    @keyframes warm-glow {
      0%,70% { opacity: 0; }
      80% { opacity: 0.25; }
      90% { opacity: 0.15; }
      100% { opacity: 0; }
    }
    /* Scene loop */
    @keyframes scene {
      0% { opacity: 1; }
      95% { opacity: 1; }
      100% { opacity: 0; }
    }
    /* Outer ring pulse */
    @keyframes ring-pulse {
      0%,100% { stroke-width: 2; opacity: 0.5; }
      50% { stroke-width: 3; opacity: 0.8; }
    }
    /* Tick marks fade */
    @keyframes tick-fade {
      0% { opacity: 0; }
      15% { opacity: 0.6; }
      100% { opacity: 0.6; }
    }

    .main-scene { animation: scene 12s ease-in-out infinite; }
    .compass { transform-origin: 300px 240px; animation: compass-spin 12s cubic-bezier(0.2,0.8,0.3,1) infinite; }
    .compass-group { animation: compass-fade 12s ease-in-out infinite; }
    .floorplan { transform-origin: 300px 240px; animation: floor-reveal 12s ease-out infinite; }
    .wind-r { stroke-dasharray: 500; animation: wind-ribbon 12s ease-in-out infinite; fill: none; }
    .wind-r2 { stroke-dasharray: 500; animation: wind-ribbon 12s ease-in-out 0.4s infinite; fill: none; }
    .wind-r3 { stroke-dasharray: 500; animation: wind-ribbon 12s ease-in-out 0.8s infinite; fill: none; }
    .sun-group { transform-origin: 500px 80px; animation: sun-rays 12s ease-in-out infinite; }
    .warm { animation: warm-glow 12s ease-in-out infinite; }
    .ring-outer { animation: ring-pulse 3s ease-in-out infinite; }
    .tick { animation: tick-fade 2s ease-out both; }
  </style>

  <rect width="600" height="500" fill="#0C0A09"/>

  <g class="main-scene">
    <!-- COMPASS (Stage 1) — Large, centered -->
    <g class="compass-group">
      <g class="compass">
        <!-- Decorative outer rings -->
        <circle cx="300" cy="240" r="180" fill="none" stroke="#44403C" stroke-width="0.5" opacity="0.3"/>
        <circle cx="300" cy="240" r="170" fill="none" stroke="#44403C" stroke-width="0.3" opacity="0.2"/>
        <!-- Main outer ring -->
        <circle cx="300" cy="240" r="155" fill="none" stroke="#EAB308" stroke-width="2" opacity="0.6" class="ring-outer"/>
        <!-- Inner rings -->
        <circle cx="300" cy="240" r="130" fill="none" stroke="#44403C" stroke-width="1"/>
        <circle cx="300" cy="240" r="105" fill="none" stroke="#44403C" stroke-width="0.8"/>
        <circle cx="300" cy="240" r="80" fill="none" stroke="#44403C" stroke-width="0.5" opacity="0.6"/>
        <circle cx="300" cy="240" r="55" fill="none" stroke="#EAB308" stroke-width="0.5" opacity="0.4"/>

        <!-- 24 tick marks around the outer ring -->
        <g class="tick" stroke="#A8A29E" stroke-width="0.8">
          <line x1="300" y1="62" x2="300" y2="78"/>
          <line x1="300" y1="402" x2="300" y2="418"/>
          <line x1="142" y1="240" x2="158" y2="240"/>
          <line x1="442" y1="240" x2="458" y2="240"/>
          <!-- Diagonals -->
          <line x1="188" y1="128" x2="199" y2="139"/>
          <line x1="401" y1="341" x2="412" y2="352"/>
          <line x1="412" y1="128" x2="401" y2="139"/>
          <line x1="199" y1="341" x2="188" y2="352"/>
          <!-- Sub ticks -->
          <line x1="240" y1="76" x2="243" y2="88" opacity="0.4"/>
          <line x1="360" y1="76" x2="357" y2="88" opacity="0.4"/>
          <line x1="240" y1="392" x2="243" y2="404" opacity="0.4"/>
          <line x1="360" y1="392" x2="357" y2="404" opacity="0.4"/>
          <line x1="152" y1="180" x2="164" y2="183" opacity="0.4"/>
          <line x1="436" y1="297" x2="448" y2="300" opacity="0.4"/>
          <line x1="152" y1="300" x2="164" y2="297" opacity="0.4"/>
          <line x1="436" y1="183" x2="448" y2="180" opacity="0.4"/>
        </g>

        <!-- Cardinal direction marks (large) -->
        <line x1="300" y1="82" x2="300" y2="102" stroke="#EAB308" stroke-width="3"/>
        <line x1="300" y1="378" x2="300" y2="398" stroke="#EAB308" stroke-width="3"/>
        <line x1="182" y1="240" x2="202" y2="240" stroke="#EAB308" stroke-width="3"/>
        <line x1="398" y1="240" x2="418" y2="240" stroke="#EAB308" stroke-width="3"/>

        <!-- Bagua trigram marks (decorative) -->
        <g fill="none" stroke="#A8A29E" stroke-width="1.5" opacity="0.5">
          <!-- NE -->
          <line x1="395" y1="140" x2="405" y2="130"/>
          <line x1="398" y1="145" x2="408" y2="135"/>
          <!-- NW -->
          <line x1="195" y1="140" x2="205" y2="130"/>
          <line x1="192" y1="145" x2="202" y2="135"/>
          <!-- SE -->
          <line x1="395" y1="340" x2="405" y2="350"/>
          <line x1="398" y1="335" x2="408" y2="345"/>
          <!-- SW -->
          <line x1="195" y1="340" x2="205" y2="350"/>
          <line x1="192" y1="335" x2="202" y2="345"/>
        </g>

        <!-- Compass needle (large) -->
        <polygon points="300,100 290,240 310,240" fill="#EAB308" opacity="0.85"/>
        <polygon points="300,380 290,240 310,240" fill="#44403C" opacity="0.5"/>
        <!-- Center hub -->
        <circle cx="300" cy="240" r="12" fill="#292524" stroke="#EAB308" stroke-width="2"/>
        <circle cx="300" cy="240" r="5" fill="#EAB308"/>

        <!-- Direction letters (larger) -->
        <text x="300" y="68" fill="#EAB308" font-family="serif" font-size="18" text-anchor="middle" font-weight="bold">N</text>
        <text x="300" y="430" fill="#A8A29E" font-family="serif" font-size="14" text-anchor="middle">S</text>
        <text x="468" y="245" fill="#A8A29E" font-family="serif" font-size="14" text-anchor="middle">E</text>
        <text x="132" y="245" fill="#A8A29E" font-family="serif" font-size="14" text-anchor="middle">W</text>
        <!-- Sub-directions -->
        <text x="420" y="135" fill="#A8A29E" font-family="serif" font-size="9" text-anchor="middle" opacity="0.5">NE</text>
        <text x="180" y="135" fill="#A8A29E" font-family="serif" font-size="9" text-anchor="middle" opacity="0.5">NW</text>
        <text x="420" y="355" fill="#A8A29E" font-family="serif" font-size="9" text-anchor="middle" opacity="0.5">SE</text>
        <text x="180" y="355" fill="#A8A29E" font-family="serif" font-size="9" text-anchor="middle" opacity="0.5">SW</text>

        <!-- Chinese Feng Shui characters around the inner ring -->
        <text x="300" y="128" fill="#EAB308" font-family="serif" font-size="10" text-anchor="middle" opacity="0.6">子</text>
        <text x="300" y="362" fill="#EAB308" font-family="serif" font-size="10" text-anchor="middle" opacity="0.6">午</text>
        <text x="212" y="244" fill="#EAB308" font-family="serif" font-size="10" text-anchor="middle" opacity="0.6">卯</text>
        <text x="388" y="244" fill="#EAB308" font-family="serif" font-size="10" text-anchor="middle" opacity="0.6">酉</text>
      </g>
    </g>

    <!-- FLOORPLAN (Stage 1→2 transition) — larger -->
    <g class="floorplan">
      <!-- Outer walls -->
      <rect x="200" y="160" width="200" height="160" fill="none" stroke="#F5F5F4" stroke-width="1.5" rx="2"/>
      <!-- Room dividers -->
      <line x1="300" y1="160" x2="300" y2="268" stroke="#F5F5F4" stroke-width="1"/>
      <line x1="200" y1="268" x2="400" y2="268" stroke="#F5F5F4" stroke-width="1"/>
      <!-- Door openings -->
      <line x1="290" y1="268" x2="290" y2="285" stroke="#EAB308" stroke-width="1.2"/>
      <path d="M290,268 Q275,268 275,285" fill="none" stroke="#EAB308" stroke-width="0.8" opacity="0.5"/>
      <!-- Windows -->
      <rect x="225" y="159" width="25" height="3" fill="#EAB308" opacity="0.7"/>
      <rect x="345" y="159" width="25" height="3" fill="#EAB308" opacity="0.7"/>
      <rect x="399" y="195" width="3" height="25" fill="#EAB308" opacity="0.7"/>
      <!-- Furniture hints -->
      <rect x="215" y="180" width="30" height="20" rx="3" fill="none" stroke="#A8A29E" stroke-width="0.6"/>
      <rect x="320" y="180" width="35" height="25" rx="3" fill="none" stroke="#A8A29E" stroke-width="0.6"/>
      <rect x="220" y="280" width="50" height="20" rx="2" fill="none" stroke="#A8A29E" stroke-width="0.6"/>
      <!-- Room labels -->
      <text x="245" y="218" fill="#A8A29E" font-family="sans-serif" font-size="8" text-anchor="middle">Phòng khách</text>
      <text x="350" y="218" fill="#A8A29E" font-family="sans-serif" font-size="8" text-anchor="middle">Phòng ngủ</text>
      <text x="260" y="305" fill="#A8A29E" font-family="sans-serif" font-size="8" text-anchor="middle">Bếp</text>
    </g>

    <!-- WIND FLOW (Stage 2) — larger paths -->
    <path class="wind-r" d="M170,200 C220,180 270,220 310,195 S380,210 430,190"
          stroke="#22D3EE" stroke-width="2.5" opacity="0.4"/>
    <path class="wind-r2" d="M170,235 C230,215 280,255 320,230 S390,245 430,225"
          stroke="#22D3EE" stroke-width="1.8" opacity="0.3"/>
    <path class="wind-r3" d="M180,270 C240,250 290,280 330,260 S385,275 425,258"
          stroke="#22D3EE" stroke-width="1.2" opacity="0.2"/>
    <!-- Wind particles -->
    <circle r="4" fill="#22D3EE" opacity="0" class="wind-r">
      <animateMotion dur="12s" repeatCount="indefinite" path="M170,200 C220,180 270,220 310,195 S380,210 430,190"/>
    </circle>
    <circle r="3" fill="#67E8F9" opacity="0" class="wind-r2">
      <animateMotion dur="12s" repeatCount="indefinite" path="M170,235 C230,215 280,255 320,230 S390,245 430,225"/>
    </circle>

    <!-- SUNLIGHT (Stage 3) — larger rays -->
    <g class="sun-group">
      <!-- Sun -->
      <circle cx="500" cy="80" r="16" fill="#EAB308" opacity="0.5"/>
      <circle cx="500" cy="80" r="22" fill="none" stroke="#EAB308" stroke-width="0.5" opacity="0.2"/>
      <!-- God rays -->
      <polygon points="475,95 260,220 280,250 485,105" fill="#EAB308" opacity="0.08"/>
      <polygon points="485,90 300,210 320,235 492,98" fill="#EAB308" opacity="0.06"/>
      <polygon points="495,85 340,195 355,215 500,92" fill="#EAB308" opacity="0.04"/>
    </g>

    <!-- Warm glow on surfaces -->
    <rect class="warm" x="215" y="180" width="65" height="45" rx="3" fill="#EAB308" opacity="0"/>
    <rect class="warm" x="320" y="185" width="60" height="35" rx="3" fill="#EAB308" opacity="0"/>
  </g>
</svg>
